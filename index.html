<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>광남고 성적 조회</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <link rel="manifest" href="manifest.json">
  
  <link rel="stylesheet" href="style.css">
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
  <div class="container">
    <div id="lastUpdatedDisplay" class="last-updated"></div>
    <div class="developer-brand">ⓒ JEONGKAPSU</div>

    <h2 id="mainTitle">광남고 성적 조회</h2>
    <div id="step1" class="step-area">
      <p>본인 확인을 위해 정보를 입력해주세요.</p>
      <input type="text" id="inputIds" placeholder="학번 (예: 1129)" onblur="autoFill('id')">
      <input type="text" id="inputName" placeholder="이름" onblur="autoFill('name')">
      <button id="btnStep1" onclick="processStep1()" class="btn">확인하기</button>
    </div>
    <div id="step2-register" class="step-area">
      <h3 style="color:#4285F4">🔐 비밀번호 설정</h3>
      <p>처음 접속하셨군요!<br>사용할 비밀번호를 설정해주세요.</p>
      <input type="password" id="regPw1" placeholder="새 비밀번호 입력">
      <input type="password" id="regPw2" placeholder="비밀번호 한번 더 입력">
      <button onclick="processRegister()" class="btn">설정하고 성적 조회하기</button>
    </div>
    <div id="step2-login" class="step-area">
      <h3 style="color:#4285F4">🔒 로그인</h3>
      <p>비밀번호를 입력하세요.</p>
      <input type="password" id="loginPw" placeholder="비밀번호">
      <button onclick="processLogin()" class="btn">성적 확인하기</button>
    </div>
    <div id="step3-result" class="step-area"></div>
  </div>

  <div id="customModal" class="modal-overlay" onclick="if(event.target === this) closeModal()">
    <div class="modal-box" id="commonModalBox" style="max-width: 380px;">
      <div id="modalTitle" class="modal-title">알림</div>
      <div id="modalMsg" class="modal-msg">내용</div>
      <div id="modalOptions" style="display:none; flex-direction:column; gap:5px; margin-top:10px; width:100%;"></div>
      <div id="modalBtnGroup" class="modal-btn-group">
        <button id="modalBtnCancel" class="modal-btn cancel" style="display:none;" onclick="closeModal()">취소</button>
        <button id="modalBtnConfirm" class="modal-btn confirm" onclick="closeModal()">확인</button>
      </div>
    </div>
  </div>

  <div id="graphModal" class="modal-overlay" onclick="if(event.target === this) closeGraphModal()">
    <div class="modal-box">
      <span class="close-icon" onclick="closeGraphModal()">&times;</span>
      <div id="graphTitle" class="modal-title" style="margin-bottom: 10px;">등급 추이</div>
      <div style="position: relative; height: 300px; width: 100%;">
        <canvas id="trendChart"></canvas>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
